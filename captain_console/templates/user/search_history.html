{% extends 'base.html' %}
{% load static %}
{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/user/profile.css' %}">
{% endblock %}
{% block content %}
<div class="container" id="mainContainer">
    <div class="row" id="row1">
        <div class="col-md-12">
            <div id="myInfo">
            </div>
                <div id="search_history_btn_container">
                    <a href="{% url 'profile-index' %}" class="btn btn-primary">< Back to profile</a>
                </div>
                <div id="username">
                    <b>{{user.username}}'s search history</b>
                </div>
        </div>
    </div>


    <div class="row">
    <table class="table">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Item</th>
            <th scope="col">Category</th>
            <th scope="col">Price ($)</th>
            <th scope="col">Date</th>
        </tr>
        </thead>
        <tbody>
        {% for product in history %}

            <tr>

                <th scope="row">{{ forloop.counter }}</th>
                <td><a href="{% url "product-index" product.product.id %}">
                    {{ product.product }}
                </a></td>
                <td>{{ product.product.category }}</td>
                <td>{{ product.product.getFinalPrice }}</td>
                <td>{{ product.date}}</td>

            </tr>

        {% endfor %}
        </tbody>
    </table>

    </div>
</div>
    {% for product in history %}
        {% for foo in product.many_set.all %}
         {{ foo }}
        {% endfor %}
        
    {% endfor %}
{% endblock %}
